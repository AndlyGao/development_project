package com.bibinet.biunion.project.ui.activity;import android.content.Intent;import android.os.Bundle;import android.view.Gravity;import android.view.View;import android.widget.ImageView;import android.widget.TextView;import com.bibinet.biunion.R;import com.bibinet.biunion.project.adapter.CollectAdapter;import com.bibinet.biunion.project.application.Constants;import com.bibinet.biunion.project.models.InformationItemsModel;import com.bibinet.biunion.project.models.InformationModel;import com.bibinet.biunion.project.net.emit.CollectEmit;import com.bibinet.biunion.project.net.firing.MyFiring;import com.bibinet.biunion.project.ui.custom.HomeHeaderView;import com.bibinet.biunion.project.ui.custom.RefreshHeaderView;import com.bibinet.biunion.project.ui.expand.PageActivity;import com.bibinet.biunion.project.ui.expand.PageActivityAdapter;import com.bibinet.biunion.project.ui.pop.CollectPop;import com.bibinet.biunion.project.utils.DensityUtil;import com.umeng.analytics.MobclickAgent;import java.util.List;import butterknife.BindView;import butterknife.OnClick;/** * Created by bibinet on 2017-6-10. */public class CollectActivity extends PageActivity<InformationItemsModel> implements CollectEmit, CollectPop.OnCollectPopListener, View.OnClickListener {    private final int TYPE_ALL = 0;  //我的收藏    private final int TYPE_TENDER = 1;  //招标信息    private final int TYPE_PROJECT = 2;  //项目信息    private final int TYPE_PPP = 3;  //PPP信息    private final int TYPE_PURCHASE = 4;  //采购信息    private int currentType = TYPE_ALL;    private String userId;    private MyFiring myFiring;    private CollectPop collectPop;    private HomeHeaderView headerView;    @Override    protected int getNotDataViewId() {        return R.id.act_foucs_not_data;    }    @Override    protected PageActivityAdapter getPageAdapter(List<InformationItemsModel> dataList) {        return new CollectAdapter(this, dataList);    }    @Override    protected void initLoad(int pageNumb) {        loadData(pageNumb);    }    @Override    protected void onPageCreate(Bundle savedInstanceState) {        setTitleBtn(true, this);        initView();        userId = Constants.loginresultInfo.getUser().getUserId();    }    @Override    protected int getRecyclerViewId() {        return R.id.act_foucs_recycler;    }    @Override    protected int getXRefreshLayoutId() {        return R.id.act_collect_refresh;    }    @Override    protected RefreshHeaderView getHeadView() {        if (headerView == null) {            headerView = HomeHeaderView.getInstance(this).getLayoutView();            headerView.init();            headerView.setSecondary(false);        }        return headerView;    }    @Override    protected int getPageLayoutId() {        return R.layout.activity_collect;    }    @Override    protected void nextPageLoad(int pageNumb) {        loadData(pageNumb);    }    @Override    protected void refreshLoad(int pageNumb) {        loadData(pageNumb);    }    private void initView() {        myFiring = new MyFiring(this);        collectPop = new CollectPop(this);    }    private void loadData(int pageNumb) {        if (currentType == TYPE_ALL) {            myFiring.getCollect(userId, null, pageNumb);        }else{            //根据类型请求数据            myFiring.getCollect(userId, String.valueOf(currentType), pageNumb);        }    }    @Override    protected void onRestart() {        super.onRestart();        initRefresh();    }    @Override    protected void onResume() {        super.onResume();        MobclickAgent.onPageStart("FoucsMyActivity");        MobclickAgent.onResume(this);    }    @Override    protected void onPause() {        super.onPause();        MobclickAgent.onPageEnd("FoucsMyActivity");        MobclickAgent.onPause(this);    }    @Override    public void onDismiss() {        setSelectIconState(false);    }    @Override    public void onSelect(int pos, String title) {        currentType = pos;        setTitleString(title);        initRefresh();    }    @Override    protected int getTitleString() {        return R.string.string_my_collect;    }    //筛选按钮点击    @Override    public void onClick(View view) {        collectPop.setCurrentType(currentType);        collectPop.showAtLocation(getTitleTV(), Gravity.TOP | Gravity.CENTER_HORIZONTAL, 0, DensityUtil.dip2px(this, 56));        setSelectIconState(true);    }}